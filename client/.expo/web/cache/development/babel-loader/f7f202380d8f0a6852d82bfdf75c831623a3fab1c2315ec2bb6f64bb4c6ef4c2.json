{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { getAllUsr, getUsrByID, getUsrByName, gamesUsr, updateUsr, usrMsgErr } from \"./usersSlices\";\nimport axios from \"axios\";\nexport var getUserByID = function getUserByID(id) {\n  return function () {\n    var _ref = _asyncToGenerator(function* (dispatch) {\n      try {\n        var response = yield axios.get(\"https://gameshop-production-e844.up.railway.app/user/\" + id);\n        var dataUser = response.data;\n        if (dataUser) {\n          dispatch(getUsrByID(dataUser));\n        } else {\n          dispatch(usrMsgErr(\"No user registration\"));\n        }\n      } catch (err) {\n        console.log(\"Error: \" + err);\n        dispatch(usrMsgErr(err));\n      }\n    });\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var getUserByName = function getUserByName(name) {\n  return function () {\n    var _ref2 = _asyncToGenerator(function* (dispatch) {\n      try {\n        var response = yield axios.get(\"https://gameshop-production-e844.up.railway.app/user?user=\" + name);\n        var dataUser = response.data;\n        if (dataUser) {\n          dispatch(getUsrByName(dataUser));\n        } else {\n          dispatch(usrMsgErr(\"No user registration\"));\n        }\n      } catch (err) {\n        console.log(\"Error: \" + err);\n        dispatch(usrMsgErr(err));\n      }\n    });\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var getAllUsers = function () {\n  var _ref3 = _asyncToGenerator(function* () {\n    return function () {\n      var _ref4 = _asyncToGenerator(function* (dispatch) {\n        try {\n          var data = yield axios.get(\"https://gameshop-production-e844.up.railway.app/user\");\n          var dataUsers = data.data;\n          dataUsers ? dispatch(getAllUsr(dataUsers)) : dispatch(usrMsgErr(\"No user registration\"));\n        } catch (err) {\n          console.log(\"Error: \" + err);\n          dispatch(usrMsgErr(err));\n        }\n      });\n      return function (_x3) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n  });\n  return function getAllUsers() {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var updateUser = function () {\n  var _ref5 = _asyncToGenerator(function* (id, newData) {\n    var oldData = _objectSpread({}, newData);\n    try {\n      var response = yield axios.put(\"https://gameshop-production-e844.up.railway.app/user/update/\" + id, newData);\n      var changedFields = [];\n      for (var key in newData) {\n        if (oldData[key] !== response.data[key]) {\n          changedFields.push(key);\n        }\n      }\n      var message = \"Was modified: \";\n      for (var field of changedFields) {\n        message += field + \": \" + oldData[field] + \" -> \" + response.data[field] + \", \";\n      }\n      message = message.slice(0, -2);\n      Alert.alert(\"Changes made:\", message);\n    } catch (err) {\n      Alert.alert(\"Something went wrong\", \"error updating data\");\n      console.log(\"error updating data\", err);\n    }\n  });\n  return function updateUser(_x4, _x5) {\n    return _ref5.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["getAllUsr","getUsrByID","getUsrByName","gamesUsr","updateUsr","usrMsgErr","axios","getUserByID","id","_ref","_asyncToGenerator","dispatch","response","get","dataUser","data","err","console","log","_x","apply","arguments","getUserByName","name","_ref2","_x2","getAllUsers","_ref3","_ref4","dataUsers","_x3","updateUser","_ref5","newData","oldData","_objectSpread","put","changedFields","key","push","message","field","slice","Alert","alert","_x4","_x5"],"sources":["C:/Users/famil/OneDrive/Escritorio/Henry-PF/GameShop/client/src/redux/userActions.js"],"sourcesContent":["import { Alert } from \"react-native\";\r\nimport {\r\n  getAllUsr,\r\n  getUsrByID,\r\n  getUsrByName,\r\n  gamesUsr,\r\n  updateUsr,\r\n  usrMsgErr,\r\n} from \"./usersSlices\";\r\nimport axios from \"axios\";\r\n\r\nexport const getUserByID = (id) => {\r\n    return async (dispatch) => {\r\n      try {\r\n        const response = await axios.get(\r\n          `https://gameshop-production-e844.up.railway.app/user/${id}`\r\n        );\r\n  \r\n        const dataUser = response.data;\r\n  \r\n        if (dataUser) {\r\n          dispatch(getUsrByID(dataUser));\r\n        } else {\r\n          dispatch(usrMsgErr(\"No user registration\"));\r\n        }\r\n      } catch (err) {\r\n        console.log(`Error: ${err}`);\r\n        dispatch(usrMsgErr(err));\r\n      }\r\n    };\r\n  };\r\n\r\n  export const getUserByName = (name) => {\r\n    return async (dispatch) => {\r\n      try {\r\n        const response = await axios.get(\r\n          `https://gameshop-production-e844.up.railway.app/user?user=${name}`\r\n        );\r\n  \r\n        const dataUser = response.data;\r\n  \r\n        if (dataUser) {\r\n          dispatch(getUsrByName(dataUser));\r\n        } else {\r\n          dispatch(usrMsgErr(\"No user registration\"));\r\n        }\r\n      } catch (err) {\r\n        console.log(`Error: ${err}`);\r\n        dispatch(usrMsgErr(err));\r\n      }\r\n    };\r\n  };\r\n\r\n  export const getAllUsers = async () => {\r\n    return async (dispatch) => {\r\n      try {\r\n        const data = await axios.get(\r\n          `https://gameshop-production-e844.up.railway.app/user`\r\n        );\r\n  \r\n        const dataUsers = data.data;\r\n  \r\n        dataUsers\r\n          ? dispatch(getAllUsr(dataUsers))\r\n          : dispatch(usrMsgErr(\"No user registration\"));\r\n      } catch (err) {\r\n        console.log(`Error: ${err}`);\r\n  \r\n        dispatch(usrMsgErr(err));\r\n      }\r\n    };\r\n  };\r\n\r\n  export const updateUser = async (id, newData) => {\r\n    const oldData = { ...newData };\r\n    try {\r\n      const response = await axios.put(\r\n        `https://gameshop-production-e844.up.railway.app/user/update/${id}`,\r\n        newData\r\n      );\r\n  \r\n      const changedFields = [];\r\n      for (const key in newData) {\r\n        if (oldData[key] !== response.data[key]) {\r\n          changedFields.push(key);\r\n        }\r\n      }\r\n  \r\n      // AquÃ­ se comparan los cambios\r\n      let message = \"Was modified: \";\r\n      for (const field of changedFields) {\r\n        message += `${field}: ${oldData[field]} -> ${response.data[field]}, `;\r\n      }\r\n      message = message.slice(0, -2); // Eliminar la coma y el espacio al final\r\n  \r\n      Alert.alert(\"Changes made:\", message);\r\n    } catch (err) {\r\n      Alert.alert(\"Something went wrong\", \"error updating data\");\r\n      console.log(\"error updating data\", err);\r\n    }\r\n  };\r\n\r\n"],"mappings":";;;;;AACA,SACEA,SAAS,EACTC,UAAU,EACVC,YAAY,EACZC,QAAQ,EACRC,SAAS,EACTC,SAAS;AAEX,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,EAAE,EAAK;EAC/B;IAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAO,WAAOC,QAAQ,EAAK;MACzB,IAAI;QACF,IAAMC,QAAQ,SAASN,KAAK,CAACO,GAAG,2DAC0BL,EAC1D,CAAC;QAED,IAAMM,QAAQ,GAAGF,QAAQ,CAACG,IAAI;QAE9B,IAAID,QAAQ,EAAE;UACZH,QAAQ,CAACV,UAAU,CAACa,QAAQ,CAAC,CAAC;QAChC,CAAC,MAAM;UACLH,QAAQ,CAACN,SAAS,CAAC,sBAAsB,CAAC,CAAC;QAC7C;MACF,CAAC,CAAC,OAAOW,GAAG,EAAE;QACZC,OAAO,CAACC,GAAG,aAAWF,GAAK,CAAC;QAC5BL,QAAQ,CAACN,SAAS,CAACW,GAAG,CAAC,CAAC;MAC1B;IACF,CAAC;IAAA,iBAAAG,EAAA;MAAA,OAAAV,IAAA,CAAAW,KAAA,OAAAC,SAAA;IAAA;EAAA;AACH,CAAC;AAED,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,IAAI,EAAK;EACrC;IAAA,IAAAC,KAAA,GAAAd,iBAAA,CAAO,WAAOC,QAAQ,EAAK;MACzB,IAAI;QACF,IAAMC,QAAQ,SAASN,KAAK,CAACO,GAAG,gEAC+BU,IAC/D,CAAC;QAED,IAAMT,QAAQ,GAAGF,QAAQ,CAACG,IAAI;QAE9B,IAAID,QAAQ,EAAE;UACZH,QAAQ,CAACT,YAAY,CAACY,QAAQ,CAAC,CAAC;QAClC,CAAC,MAAM;UACLH,QAAQ,CAACN,SAAS,CAAC,sBAAsB,CAAC,CAAC;QAC7C;MACF,CAAC,CAAC,OAAOW,GAAG,EAAE;QACZC,OAAO,CAACC,GAAG,aAAWF,GAAK,CAAC;QAC5BL,QAAQ,CAACN,SAAS,CAACW,GAAG,CAAC,CAAC;MAC1B;IACF,CAAC;IAAA,iBAAAS,GAAA;MAAA,OAAAD,KAAA,CAAAJ,KAAA,OAAAC,SAAA;IAAA;EAAA;AACH,CAAC;AAED,OAAO,IAAMK,WAAW;EAAA,IAAAC,KAAA,GAAAjB,iBAAA,CAAG,aAAY;IACrC;MAAA,IAAAkB,KAAA,GAAAlB,iBAAA,CAAO,WAAOC,QAAQ,EAAK;QACzB,IAAI;UACF,IAAMI,IAAI,SAAST,KAAK,CAACO,GAAG,uDAE5B,CAAC;UAED,IAAMgB,SAAS,GAAGd,IAAI,CAACA,IAAI;UAE3Bc,SAAS,GACLlB,QAAQ,CAACX,SAAS,CAAC6B,SAAS,CAAC,CAAC,GAC9BlB,QAAQ,CAACN,SAAS,CAAC,sBAAsB,CAAC,CAAC;QACjD,CAAC,CAAC,OAAOW,GAAG,EAAE;UACZC,OAAO,CAACC,GAAG,aAAWF,GAAK,CAAC;UAE5BL,QAAQ,CAACN,SAAS,CAACW,GAAG,CAAC,CAAC;QAC1B;MACF,CAAC;MAAA,iBAAAc,GAAA;QAAA,OAAAF,KAAA,CAAAR,KAAA,OAAAC,SAAA;MAAA;IAAA;EACH,CAAC;EAAA,gBAlBYK,WAAWA,CAAA;IAAA,OAAAC,KAAA,CAAAP,KAAA,OAAAC,SAAA;EAAA;AAAA,GAkBvB;AAED,OAAO,IAAMU,UAAU;EAAA,IAAAC,KAAA,GAAAtB,iBAAA,CAAG,WAAOF,EAAE,EAAEyB,OAAO,EAAK;IAC/C,IAAMC,OAAO,GAAAC,aAAA,KAAQF,OAAO,CAAE;IAC9B,IAAI;MACF,IAAMrB,QAAQ,SAASN,KAAK,CAAC8B,GAAG,kEACiC5B,EAAE,EACjEyB,OACF,CAAC;MAED,IAAMI,aAAa,GAAG,EAAE;MACxB,KAAK,IAAMC,GAAG,IAAIL,OAAO,EAAE;QACzB,IAAIC,OAAO,CAACI,GAAG,CAAC,KAAK1B,QAAQ,CAACG,IAAI,CAACuB,GAAG,CAAC,EAAE;UACvCD,aAAa,CAACE,IAAI,CAACD,GAAG,CAAC;QACzB;MACF;MAGA,IAAIE,OAAO,GAAG,gBAAgB;MAC9B,KAAK,IAAMC,KAAK,IAAIJ,aAAa,EAAE;QACjCG,OAAO,IAAOC,KAAK,UAAKP,OAAO,CAACO,KAAK,CAAC,YAAO7B,QAAQ,CAACG,IAAI,CAAC0B,KAAK,CAAC,OAAI;MACvE;MACAD,OAAO,GAAGA,OAAO,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MAE9BC,KAAK,CAACC,KAAK,CAAC,eAAe,EAAEJ,OAAO,CAAC;IACvC,CAAC,CAAC,OAAOxB,GAAG,EAAE;MACZ2B,KAAK,CAACC,KAAK,CAAC,sBAAsB,EAAE,qBAAqB,CAAC;MAC1D3B,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEF,GAAG,CAAC;IACzC;EACF,CAAC;EAAA,gBA3BYe,UAAUA,CAAAc,GAAA,EAAAC,GAAA;IAAA,OAAAd,KAAA,CAAAZ,KAAA,OAAAC,SAAA;EAAA;AAAA,GA2BtB"},"metadata":{},"sourceType":"module","externalDependencies":[]}