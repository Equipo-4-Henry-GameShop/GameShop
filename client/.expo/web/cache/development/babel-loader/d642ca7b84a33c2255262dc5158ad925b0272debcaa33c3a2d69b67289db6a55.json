{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from 'axios';\nimport mime from 'mime';\nexport var uploadImageAsync = function () {\n  var _ref = _asyncToGenerator(function* (uri) {\n    var formData = new FormData();\n    var fileType = mime.getType(uri);\n    formData.append('file', {\n      uri: uri,\n      type: fileType,\n      name: 'upload.jpg'\n    });\n    console.log(formData);\n    formData.append('upload_preset', 'gameShop_img');\n    formData.append('cloud_name', 'deamondhero');\n    try {\n      var response = yield axios.post('https://api.cloudinary.com/v1_1/deamondhero/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      var result = response.data;\n      console.log(result);\n      console.log(result.secure_url);\n      return result.secure_url;\n    } catch (error) {\n      console.log(error);\n      throw new Error('Failed to upload image');\n    }\n  });\n  return function uploadImageAsync(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["axios","mime","uploadImageAsync","_ref","_asyncToGenerator","uri","formData","FormData","fileType","getType","append","type","name","console","log","response","post","headers","result","data","secure_url","error","Error","_x","apply","arguments"],"sources":["C:/Users/SARFI1/Documents/PF/gameSHOP/GameShop/client/src/components/helpers/uploadImage.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport mime from 'mime';\r\n\r\nexport const uploadImageAsync = async (uri) => {\r\n  const formData = new FormData();\r\n  const fileType = mime.getType(uri);\r\n  formData.append('file', {\r\n    uri: uri,\r\n    type: fileType,\r\n    name: 'upload.jpg',\r\n  });\r\n\r\n  console.log(formData)\r\n  formData.append('upload_preset', 'gameShop_img');\r\n  formData.append('cloud_name', 'deamondhero');\r\n\r\n  try {\r\n    const response = await axios.post(\r\n      'https://api.cloudinary.com/v1_1/deamondhero/upload',\r\n      formData,\r\n      {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      }\r\n    );\r\n\r\n    const result = response.data;\r\n    console.log(result);\r\n    console.log(result.secure_url);\r\n    return result.secure_url;\r\n  } catch (error) {\r\n    console.log(error);\r\n    throw new Error('Failed to upload image');\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import { Button, Image, View, Platform } from 'react-native';\r\n// import * as ImagePicker from 'expo-image-picker';\r\n\r\n\r\n//  export const uploadImageAsync = async (uri) => {\r\n//     const body = new FormData();\r\n//     body.append(\"file\", {\r\n//       uri: uri,\r\n//       type: \"image/jpeg\",\r\n//       name: \"upload.jpg\",\r\n//     });\r\n//     body.append(\"upload_preset\", \"gameShop_img\");\r\n//     body.append(\"cloud_name\", \"deamondhero\");\r\n\r\n//     const response = await fetch(\"https://api.cloudinary.com/v1_1/deamondhero/upload\", {\r\n//       method: \"POST\",\r\n//       body: body,\r\n//     });\r\n\r\n//     const result = await response.json();\r\n//     console.log(result)\r\n//     console.log(result.secure_url)\r\n//     return result.secure_url;\r\n//   };\r\n  \r\n  // const pickImage = async () => {\r\n  //   let result = await ImagePicker.launchImageLibraryAsync({\r\n  //     mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n  //     allowsMultipleSelection: true,\r\n  //     allowsEditing: false,\r\n  //     aspect: [3, 4],\r\n  //     quality: 0.5,\r\n  //   });\r\n\r\n  //   console.log(result);\r\n\r\n  //   if (!result.canceled) {\r\n  //     const uploadedImages = await Promise.all(result.assets.map(async (image) => {\r\n  //       const imageUrl = await uploadImageAsync(image.uri);\r\n  //       return { ...image, imageUrl };\r\n  //     }));\r\n\r\n   \r\n  \r\n  //     setImage(uploadedImages);\r\n  //     console.log(uploadedImages)\r\n  //     return uploadedImages\r\n  //   }}\r\n\r\n\r\n  // return (\r\n  //   <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\r\n  //     <Button title=\"Load images from gallery\" onPress={pickImage} />\r\n      \r\n  //     {image && image.map((i)=>{\r\n  //       return(\r\n  //     <Image source={{ uri: i.uri }} style={{ margin:5,  width: 200, height: 200}} />)})\r\n  //   }\r\n  //   </View>\r\n  // );\r\n// }"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,IAAI,MAAM,MAAM;AAEvB,OAAO,IAAMC,gBAAgB;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,GAAG,EAAK;IAC7C,IAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/B,IAAMC,QAAQ,GAAGP,IAAI,CAACQ,OAAO,CAACJ,GAAG,CAAC;IAClCC,QAAQ,CAACI,MAAM,CAAC,MAAM,EAAE;MACtBL,GAAG,EAAEA,GAAG;MACRM,IAAI,EAAEH,QAAQ;MACdI,IAAI,EAAE;IACR,CAAC,CAAC;IAEFC,OAAO,CAACC,GAAG,CAACR,QAAQ,CAAC;IACrBA,QAAQ,CAACI,MAAM,CAAC,eAAe,EAAE,cAAc,CAAC;IAChDJ,QAAQ,CAACI,MAAM,CAAC,YAAY,EAAE,aAAa,CAAC;IAE5C,IAAI;MACF,IAAMK,QAAQ,SAASf,KAAK,CAACgB,IAAI,CAC/B,oDAAoD,EACpDV,QAAQ,EACR;QACEW,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CACF,CAAC;MAED,IAAMC,MAAM,GAAGH,QAAQ,CAACI,IAAI;MAC5BN,OAAO,CAACC,GAAG,CAACI,MAAM,CAAC;MACnBL,OAAO,CAACC,GAAG,CAACI,MAAM,CAACE,UAAU,CAAC;MAC9B,OAAOF,MAAM,CAACE,UAAU;IAC1B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;MAClB,MAAM,IAAIC,KAAK,CAAC,wBAAwB,CAAC;IAC3C;EACF,CAAC;EAAA,gBAhCYpB,gBAAgBA,CAAAqB,EAAA;IAAA,OAAApB,IAAA,CAAAqB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAgC5B"},"metadata":{},"sourceType":"module","externalDependencies":[]}